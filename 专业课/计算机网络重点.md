路由聚合时，看看两个网络号是否一样
tcp计算问题，序号100-199，为100个字节，确认号为下一个字节的序列号为200

#数据传输的过程
![](附件/Pasted%20image%2020221018202021.png)
除内网外，ip源地址和目的地址不变。
如需经过路由器，目的地址为路由器地址，路由器转发时，源地址为路由器mac地址。

---

#以太网
不可靠，无连接
采用二进制指数退避算法发1坚持CSMA-CD算法
以太网帧：![](附件/Pasted%20image%2020221018191424.png)
FCS是4B的CRC冗余校验码，不提供可靠数据传输，有差错直接丢弃

#交换机
CSMA/CD访问链路，发送帧
交换表的构造：
1. 收到帧时，保存源mac地址以及对应的接受端口号
2. 如果存在，不记录，不存在，则5。再表中寻找目的mac地址，在判断目的mac地址和源mac地址是否再同一网段，是则3，不是则4
3. 丢弃
4. 向目的地址所在网段转发
5. 广播

#CSMA 载波监听多路访问协议

#点对点链路协议
点对点链路的三个问题，帧定界，透明传输，差错检测
1. PPP
	1. ![](附件/Pasted%20image%2020221018211020.png)
		1. F帧定界符；A地址字段，无效；C控制字段，无效；. 
		2.异步传输，采用字节填充
		3.同步传输，采用零比特填充
1. HDLC
	1. 采用零比特填充
2. 数据链路层的字节填充和ppp的字节填充不一样，比特填充都是逢5个1添一个0

---
#码分多址 
接收到的码片序列和每个站的码片序列内积（向量乘）再除以码片长度，结果为1，发送的就是1，结果为-1，发送的就是0。

---
#广播域与冲突域

#可靠与连接
可靠是指发送的是什么接收到的就是什么（不错，不丢，不乱）
无连接连接（可以异步，收方不需要接受）
<mark style="background: #FFF3A3A6;">面向连接则一定可靠</mark>

路由器（网络层）和网桥（数据链路层）两端协议可以不同，中继器（物理层）两端协议必须相同

#无线局域网
802.11b 物理层实现方法DSSS（直接序列扩频），最高速率11M，频段2.4G
802.11a                           OFDM（正交频分复用），最高速率54M，频段5G
802.11g                           OFDM                                                54M          2.4G
使用CSMA-CA（避免冲突）协议，会发送确认帧，确认收到数据。
	基本思想，发送端预约信道，避免长数据帧的冲突
mac（多路访问控制协议）PCF（轮询，非竞争），DCF（CSMA-CA，竞争）

隐藏站点问题
![](附件/Pasted%20image%2020221021183517.png)
通过握手解决

---
暴露站点问题
![](附件/Pasted%20image%2020221021183729.png)

---
802.11 无线局域网； 802.3 以太网

---
RIP是距离向量算法，BGP是路径向量算法

---
#CSMA 
非坚持：不坚持监听，随机等待一段时间之后进行监听
1坚持：一直监听信道
p坚持：以概率p进行坚持监听信道，以概率(1-p)随机等待一段时间监听信道

---
#虚电路
数据报是网络层提供的无连接服务
虚电路是网络层提供的连接服务

---
网络层的数据交换方式分为电路交换，分组交换

---
#时延
排队延时：等待发送时间
处理延时：路由器加工时间
传输延时（发送延时）：节点/路由器传输数据需要的时间
传播延时：物理介质上的传播
时延带宽积（链路上能容纳比特数）=传播时$\times$延带宽
RTT（往返延时）

---
#路由表结构
路由器路由表：目的网络；子网掩码；下一跳地址；接口

---
#最大窗口
回退n：累计确认机制，$2^n-1$
选择重传：窗口大小等于序列号空间的一半$2^{n-1}$

---
#ipv6
地址128位，首部固定部分40字节

---
#检错编码和纠错编码
检错编码CRC：先加屁股（除数的位数减1个0），模2除，最后余数一定是（除数少一位，0也要包含在内）
纠错编码汉明码：

---
#各个协议封装在那一层
ARP封装在数据链路层
DHCP封装在udp中
icmp属于网络层
RIP封装在udp
BGP封装在tcp
OSPF封装在ip
FTP使用tcp
imap使用tcp
smtp使用tcp
pop3使用tcp
dns都使用

---
